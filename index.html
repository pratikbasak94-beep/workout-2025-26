<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transformation Tracker</title>
    <style>
        :root { --primary: #2563eb; --bg: #f3f4f6; --card: #ffffff; --text: #1f2937; --success: #10b981; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); padding: 20px; margin: 0; }
        .container { max-width: 600px; margin: 0 auto; padding-bottom: 50px; }
        
        /* Header & Navigation */
        header { text-align: center; margin-bottom: 20px; }
        h1 { color: var(--primary); margin: 0; font-size: 1.5rem; }
        .nav-controls { display: flex; justify-content: space-between; align-items: center; margin-top: 15px; background: white; padding: 10px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .btn-nav { background: var(--primary); color: white; border: none; padding: 8px 15px; border-radius: 6px; cursor: pointer; font-weight: bold; }
        .btn-nav:hover { opacity: 0.9; }
        .current-range { font-weight: bold; font-size: 0.9rem; }

        /* Cards */
        .day-card { background: var(--card); border-radius: 12px; padding: 15px; margin-bottom: 15px; border-left: 5px solid var(--primary); box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .sunday-card { border-left-color: var(--success); }
        
        .day-header { display: flex; justify-content: space-between; margin-bottom: 10px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        .day-name { font-weight: bold; }
        .day-date { background: #e0e7ff; color: var(--primary); padding: 2px 8px; border-radius: 4px; font-size: 0.85rem; font-weight: 600; }

        .section-title { font-size: 0.8rem; text-transform: uppercase; color: #888; margin: 10px 0 5px 0; font-weight: bold; }
        
        /* Checkboxes */
        .checklist-item { display: flex; align-items: center; padding: 6px 0; cursor: pointer; }
        input[type="checkbox"] { width: 18px; height: 18px; margin-right: 10px; accent-color: var(--success); }
        input[type="checkbox"]:checked + span { text-decoration: line-through; color: #9ca3af; }

        /* Stats */
        .stats-bar { position: fixed; bottom: 0; left: 0; right: 0; background: white; padding: 10px; border-top: 1px solid #eee; text-align: center; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); }
        .progress-text { font-size: 0.9rem; font-weight: bold; color: var(--primary); }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>90kg &rarr; 65kg Journey</h1>
        <div class="nav-controls">
            <button class="btn-nav" onclick="changeWeek(-7)">&#8592; Prev</button>
            <span class="current-range" id="week-display">...</span>
            <button class="btn-nav" onclick="changeWeek(7)">Next &#8594;</button>
        </div>
    </header>

    <div id="tracker-app"></div>
</div>

<div class="stats-bar">
    <div class="progress-text" id="completion-rate">Weekly Progress: 0%</div>
</div>

<script>
    // --- CONFIGURATION ---
    // Start Date: Monday, Dec 15, 2025
    // Note: Month is 0-indexed (11 = Dec)
    const baseDate = new Date(2025, 11, 15); 
    
    // Track which Monday we are currently viewing (Starts at baseDate)
    let currentMonday = new Date(baseDate);

    // --- DATA ---
    const workoutPlan = [
        { type: "Lower Body", tasks: ["Sit-to-Stand: 3x5", "Wall Sit: 2x20s", "Leg Lifts: 2x8"] }, // Mon
        { type: "Upper Body A", tasks: ["Tube Rows: 3x12", "Tube Shoulder Press: 3x10", "Tube Face Pulls: 3x12"] }, // Tue
        { type: "Lower Body", tasks: ["Sit-to-Stand: 3x5", "Wall Sit: 2x20s", "Leg Lifts: 2x8"] }, // Wed
        { type: "CHEST DAY", tasks: ["Tube Chest Press: 3x12", "Incline Pushups: 3x5", "Tube Flys: 3x12"] }, // Thu
        { type: "Lower Body", tasks: ["Sit-to-Stand: 3x5", "Wall Sit: 2x20s", "Leg Lifts: 2x8"] }, // Fri
        { type: "Upper Body B", tasks: ["Tube Bicep Curls: 3x12", "Tube Tricep Pushdown: 3x12", "Forearm Twists: 3x20s"] }, // Sat
        { type: "REST DAY", tasks: ["No Gym", "Walk Only", "Sleep Well"] } // Sun
    ];

    const dietPlan = [ "9AM: 50g Sattu + Lemon", "11AM: Lunch (Rotis/Rice + Sabzi)", "2:30PM: Banana", "6:30PM: Tea (NO BISCUIT)", "8:30PM: 2 Rotis (Dry)" ];
    const sundayDiet = [ "9AM: Sattu", "11AM: Lunch (CHICKEN + Less Rice)", "2:30PM: Banana", "6:30PM: Tea", "8:30PM: 2 Rotis" ];
    const days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];

    // --- APP LOGIC ---

    function init() {
        renderWeek();
    }

    function changeWeek(offsetDays) {
        currentMonday.setDate(currentMonday.getDate() + offsetDays);
        renderWeek();
    }

    function renderWeek() {
        const app = document.getElementById('tracker-app');
        app.innerHTML = '';
        
        let totalTasks = 0;
        let completedTasks = 0;

        // Calculate End of Week for Header
        let sunday = new Date(currentMonday);
        sunday.setDate(currentMonday.getDate() + 6);
        
        // Update Header Text
        document.getElementById('week-display').innerText = 
            formatDate(currentMonday) + ' - ' + formatDate(sunday);

        // Generate 7 Days
        for (let i = 0; i < 7; i++) {
            // Calculate specific date for this card
            let cardDate = new Date(currentMonday);
            cardDate.setDate(currentMonday.getDate() + i);
            let dateStr = formatDate(cardDate);
            
            // Unique Key for Storage: "YYYY-MM-DD_TaskID"
            // This ensures every week has its own history!
            let storageDateKey = cardDate.toISOString().split('T')[0]; 

            let dayName = days[i];
            let wPlan = workoutPlan[i];
            let dPlan = (dayName === "Sunday") ? sundayDiet : dietPlan;
            let cardClass = (dayName === "Sunday") ? "day-card sunday-card" : "day-card";

            // Generate HTML for Diet
            let dietHtml = "";
            dPlan.forEach((item, idx) => {
                let id = storageDateKey + 'diet' + idx;
                let isChecked = localStorage.getItem(id) === 'true';
                if(isChecked) completedTasks++;
                totalTasks++;
                dietHtml += createCheckbox(id, item, isChecked);
            });

            // Generate HTML for Workout
            let workoutHtml = "";
            wPlan.tasks.forEach((item, idx) => {
                let id = storageDateKey + 'workout' + idx;
                let isChecked = localStorage.getItem(id) === 'true';
                if(isChecked) completedTasks++;
                totalTasks++;
                workoutHtml += createCheckbox(id, item, isChecked);
            });

            // Build Card
            app.innerHTML += 
                '<div class="' + cardClass + '">' +
                    '<div class="day-header">' +
                        '<span class="day-name">' + dayName + '</span>' +
                        '<span class="day-date">' + dateStr + '</span>' +
                    '</div>' +
                    '<div class="section-title">üçΩ Diet</div>' + dietHtml +
                    '<div class="section-title" style="color:var(--primary)">üèã ' + wPlan.type + '</div>' + workoutHtml +
                '</div>';
        }
        
        updateStats(completedTasks, totalTasks);
    }

    function createCheckbox(id, text, checked) {
        let checkedAttr = checked ? 'checked' : '';
        return '<label class="checklist-item">' +
                '<input type="checkbox" id="' + id + '" ' + checkedAttr + ' onchange="toggleTask(this)">' +
                '<span>' + text + '</span>' +
            '</label>';
    }

    function toggleTask(checkbox) {
        localStorage.setItem(checkbox.id, checkbox.checked);
        // Recalculate stats immediately
        renderWeek(); 
    }

    function formatDate(date) {
        return date.toLocaleDateString('en-IN', { day: 'numeric', month: 'short' });
    }

    function updateStats(completed, total) {
        let percent = Math.round((completed / total) * 100);
        document.getElementById('completion-rate').innerText = 'Weekly Progress: ' + percent + '%';
    }

    // Start
    init();

</script>
</body>
</html>
